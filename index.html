<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Parfum Campaigns</title>
  <meta name="description" content="A curated archive of contemporary fragrance advertising and visual campaign work." />

  <meta property="og:title" content="Parfum Campaigns" />
  <meta property="og:description" content="A curated archive of contemporary fragrance advertising and visual campaign work." />
  <meta property="og:type" content="website" />

  <style>
    :root{
      --bg:#07080b;
      --panel:rgba(255,255,255,.06);
      --hair:rgba(255,255,255,.12);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.62);
      --shadow:0 18px 55px rgba(0,0,0,.55);
      --radius:18px;
      --max:1120px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--text);
      background:
        radial-gradient(900px 520px at 18% -10%, rgba(255,255,255,.09), transparent 55%),
        radial-gradient(720px 460px at 95% 0%, rgba(255,255,255,.07), transparent 55%),
        var(--bg);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      letter-spacing:-.01em;
    }
    a{color:inherit;text-decoration:none}
    .wrap{max-width:var(--max); margin:0 auto; padding:26px 16px 60px}
    header{
      display:flex; align-items:flex-end; justify-content:space-between; gap:14px;
      margin-bottom:18px;
    }
    .title{display:flex; flex-direction:column; gap:6px}
    h1{
      margin:0;
      font-size:clamp(26px, 3vw, 42px);
      letter-spacing:-.02em;
      line-height:1.05;
      font-weight:650;
    }
    .sub{
      margin:0;
      color:var(--muted);
      max-width:60ch;
      line-height:1.5;
      font-size:14.5px;
    }
    .topbar{
      display:flex; gap:10px; align-items:center; justify-content:flex-end; flex-wrap:wrap;
    }
    .chip{
      padding:10px 12px;
      border:1px solid var(--hair);
      border-radius:999px;
      background:rgba(255,255,255,.04);
      color:var(--muted);
      font-size:13px;
      user-select:none;
    }
    .search{
      flex:1 1 340px;
      display:flex; align-items:center; gap:10px;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--hair);
      background:rgba(0,0,0,.25);
      margin:14px 0 10px;
    }
    .search input{
      width:100%;
      background:transparent;
      border:0;
      outline:none;
      color:var(--text);
      font-size:14px;
    }
    .hint{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      color:var(--muted);
      font-size:12.5px;
      margin-bottom:14px;
    }
    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap:14px;
    }
    .card{
      grid-column: span 4;
      border-radius:16px;
      overflow:hidden;
      border:1px solid var(--hair);
      background:rgba(255,255,255,.03);
      box-shadow:0 12px 34px rgba(0,0,0,.42);
      transform:translateY(0);
      transition:transform .14s ease, border-color .14s ease, background .14s ease;
      cursor:pointer;
    }
    .card:hover{
      transform:translateY(-2px);
      border-color:rgba(255,255,255,.22);
      background:rgba(255,255,255,.05);
    }
    .thumb{
      width:100%;
      aspect-ratio: 4/5;
      object-fit:cover;
      display:block;
      background:rgba(255,255,255,.06);
    }
    .meta{
      padding:12px 12px 14px;
      display:flex; flex-direction:column; gap:7px;
    }
    .name{
      font-weight:650;
      font-size:14.5px;
      line-height:1.25;
    }
    .small{
      color:var(--muted);
      font-size:12.5px;
      line-height:1.3;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .tag{
      padding:4px 8px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.18);
    }
    footer{
      margin-top:26px;
      padding-top:18px;
      border-top:1px solid var(--hair);
      color:var(--muted);
      font-size:12.5px;
      display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap;
    }

    /* Lightbox */
    .lb{
      position:fixed; inset:0;
      background:rgba(0,0,0,.82);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:9999;
    }
    .lb.open{display:flex}
    .lb-inner{
      width:min(1100px, 100%);
      border-radius:18px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(10,10,12,.72);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .lb-top{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding:12px 12px;
      border-bottom:1px solid rgba(255,255,255,.12);
      color:var(--muted);
      font-size:12.5px;
    }
    .lb-btn{
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.04);
      color:var(--muted);
      cursor:pointer;
      user-select:none;
    }
    .lb-img{
      width:100%;
      height:auto;
      display:block;
      background:rgba(255,255,255,.06);
    }

    @media (max-width: 980px){
      .card{grid-column: span 6;}
      header{flex-direction:column; align-items:flex-start;}
      .topbar{width:100%; justify-content:flex-start;}
    }
    @media (max-width: 560px){
      .card{grid-column: span 12;}
      .thumb{aspect-ratio: 3/4;}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="title">
        <h1>Parfum Campaigns</h1>
        <p class="sub">A curated archive of contemporary fragrance advertising and visual campaign work.</p>
      </div>
      <div class="topbar">
        <div class="chip" id="count">0 items</div>
        <a class="chip" href="https://github.com/ParfumCampaigns/parfum-campaigns" target="_blank" rel="noreferrer">GitHub</a>
      </div>
    </header>

    <div class="search">
      <span style="opacity:.65;">Search</span>
      <input id="q" type="text" placeholder="Type MORPH, billboard, luxury, apartment, etc." autocomplete="off" />
    </div>

    <div class="hint">
      <div>Click any image to view full-screen.</div>
      <div style="opacity:.8;">Esc to close</div>
    </div>

    <div class="grid" id="grid"></div>

    <footer>
      <div>© <span id="y"></span> Parfum Campaigns</div>
      <div>Minimal • Editorial • Fast</div>
    </footer>
  </div>

  <div class="lb" id="lb" aria-hidden="true">
    <div class="lb-inner" role="dialog" aria-modal="true">
      <div class="lb-top">
        <div id="lbTitle">—</div>
        <div style="display:flex; gap:8px; align-items:center;">
          <a id="lbOpen" class="lb-btn" href="#" target="_blank" rel="noreferrer">Open file</a>
          <div class="lb-btn" id="lbClose">Close</div>
        </div>
      </div>
      <img id="lbImg" class="lb-img" alt="">
    </div>
  </div>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    const grid = document.getElementById('grid');
    const q = document.getElementById('q');
    const count = document.getElementById('count');

    // Pull the repo file listing page and auto-build a gallery from image links.
    // Works without you typing filenames.
    const repoRoot = location.pathname.replace(/\/index\.html$/,'').replace(/\/$/,'');
    const htmlUrl = "https://github.com/ParfumCampaigns/parfum-campaigns";

    const IMAGE_EXT = /\.(png|jpg|jpeg|webp)$/i;

    function niceTitle(filename){
      const base = filename.replace(IMAGE_EXT,'');
      // turn hyphens/underscores into spaces, title-case lightly
      const t = base.replace(/[-_]+/g,' ').trim();
      return t.length ? t : filename;
    }

    function makeCard(filePath){
      const filename = filePath.split('/').pop();
      const title = niceTitle(filename);

      const a = document.createElement('div');
      a.className = 'card';
      a.dataset.title = title.toLowerCase();
      a.dataset.file = filePath;

      const img = document.createElement('img');
      img.className = 'thumb';
      img.loading = 'lazy';
      img.alt = title;
      // Use raw file URL so images always load
      img.src = `https://raw.githubusercontent.com/ParfumCampaigns/parfum-campaigns/main/${filePath}`;

      const meta = document.createElement('div');
      meta.className = 'meta';

      const name = document.createElement('div');
      name.className = 'name';
      name.textContent = title;

      const small = document.createElement('div');
      small.className = 'small';
      small.innerHTML = `<span class="tag">Archive</span><span class="tag">Campaign</span>`;

      meta.appendChild(name);
      meta.appendChild(small);

      a.appendChild(img);
      a.appendChild(meta);

      a.addEventListener('click', () => openLightbox(filePath, title));
      return a;
    }

    // Lightbox
    const lb = document.getElementById('lb');
    const lbImg = document.getElementById('lbImg');
    const lbTitle = document.getElementById('lbTitle');
    const lbClose = document.getElementById('lbClose');
    const lbOpen = document.getElementById('lbOpen');

    function openLightbox(filePath, title){
      const raw = `https://raw.githubusercontent.com/ParfumCampaigns/parfum-campaigns/main/${filePath}`;
      lbTitle.textContent = title;
      lbImg.src = raw;
      lbImg.alt = title;
      lbOpen.href = raw;
      lb.classList.add('open');
      lb.setAttribute('aria-hidden','false');
    }
    function closeLightbox(){
      lb.classList.remove('open');
      lb.setAttribute('aria-hidden','true');
      lbImg.src = '';
    }
    lb.addEventListener('click', (e) => { if(e.target === lb) closeLightbox(); });
    lbClose.addEventListener('click', closeLightbox);
    document.addEventListener('keydown', (e) => { if(e.key === 'Escape') closeLightbox(); });

    // Fetch the GitHub repo page HTML, scrape image file links, build cards.
    async function build(){
      try{
        const r = await fetch(htmlUrl, { mode: 'cors' });
        const text = await r.text();

        // Find files in the repo root only
        const matches = [...text.matchAll(/href="\/ParfumCampaigns\/parfum-campaigns\/blob\/main\/([^"]+)"/g)]
          .map(m => decodeURIComponent(m[1]))
          .filter(p => IMAGE_EXT.test(p))
          .filter(p => !p.includes('/')); // root only, keep it simple

        const unique = Array.from(new Set(matches));

        grid.innerHTML = '';
        unique.forEach(p => grid.appendChild(makeCard(p)));

        count.textContent = `${unique.length} items`;

        // Search filter
        q.addEventListener('input', () => {
          const term = (q.value || '').toLowerCase().trim();
          const cards = Array.from(grid.children);
          let visible = 0;
          cards.forEach(c => {
            const title = c.dataset.title || '';
            const show = !term || title.includes(term);
            c.style.display = show ? '' : 'none';
            if(show) visible++;
          });
          count.textContent = `${visible} items`;
        });

      } catch (err){
        grid.innerHTML = `
          <div style="grid-column: 1 / -1; padding:14px; border:1px solid rgba(255,255,255,.14); border-radius:14px; background:rgba(255,255,255,.04); color:rgba(255,255,255,.75);">
            Gallery could not load automatically. This is usually a temporary GitHub fetch limit.
            Refresh once. If it persists, we switch to a manual list (still simple).
          </div>
        `;
      }
    }

    build();
  </script>
</body>
</html>
